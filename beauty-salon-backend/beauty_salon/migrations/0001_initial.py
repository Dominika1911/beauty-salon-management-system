# Generated by Django 5.2.8 on 2025-11-16 22:34

import django.core.validators
import django.db.models.deletion
import django.db.models.manager
import django.utils.timezone
from decimal import Decimal
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('auth', '0012_alter_user_first_name_max_length'),
    ]

    operations = [
        migrations.CreateModel(
            name='Service',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('name', models.CharField(db_index=True, max_length=200, verbose_name='nazwa')),
                ('category', models.CharField(db_index=True, max_length=100, verbose_name='kategoria')),
                ('description', models.TextField(blank=True, verbose_name='opis')),
                ('price', models.DecimalField(decimal_places=2, max_digits=10, verbose_name='cena')),
                ('duration', models.DurationField(verbose_name='czas trwania')),
                ('image_url', models.CharField(blank=True, max_length=500, verbose_name='zdjęcie URL')),
                ('is_published', models.BooleanField(db_index=True, default=True, verbose_name='publikowana')),
                ('promotion', models.JSONField(blank=True, null=True, verbose_name='promocja')),
                ('reservations_count', models.PositiveIntegerField(default=0, verbose_name='liczba rezerwacji')),
            ],
            options={
                'verbose_name': 'usługa',
                'verbose_name_plural': 'usługi',
                'db_table': 'uslugi',
                'ordering': ['category', 'name'],
            },
        ),
        migrations.CreateModel(
            name='StatsSnapshot',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('period', models.CharField(choices=[('daily', 'Dzienny')], max_length=20, verbose_name='okres')),
                ('total_visits', models.PositiveIntegerField(default=0, verbose_name='liczba wizyt (total)')),
                ('date_from', models.DateField(blank=True, null=True, verbose_name='data od')),
                ('date_to', models.DateField(blank=True, null=True, verbose_name='data do')),
                ('completed_visits', models.PositiveIntegerField(default=0, verbose_name='liczba wizyt zrealizowanych')),
                ('cancellations', models.PositiveIntegerField(default=0, verbose_name='liczba anulacji')),
                ('no_shows', models.PositiveIntegerField(default=0, verbose_name='liczba no-show')),
                ('revenue_total', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=12, verbose_name='przychód total')),
                ('revenue_deposits', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=12, verbose_name='przychód z zaliczek')),
                ('new_clients', models.PositiveIntegerField(default=0, verbose_name='liczba nowych klientów')),
                ('returning_clients', models.PositiveIntegerField(default=0, verbose_name='liczba powracających klientów')),
                ('employees_occupancy_avg', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=5, verbose_name='średnie obłożenie pracowników %')),
                ('extra_metrics', models.JSONField(blank=True, default=dict, verbose_name='dodatkowe metryki')),
            ],
            options={
                'verbose_name': 'statystyka snapshot',
                'verbose_name_plural': 'statystyki snapshots',
                'db_table': 'statystyki_snapshots',
            },
        ),
        migrations.CreateModel(
            name='User',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('password', models.CharField(max_length=128, verbose_name='password')),
                ('last_login', models.DateTimeField(blank=True, null=True, verbose_name='last login')),
                ('is_superuser', models.BooleanField(default=False, help_text='Designates that this user has all permissions without explicitly assigning them.', verbose_name='superuser status')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('email', models.EmailField(db_index=True, max_length=254, unique=True, verbose_name='email')),
                ('role', models.CharField(choices=[('manager', 'Administrator'), ('employee', 'Pracownik'), ('client', 'Klient')], db_index=True, default='client', max_length=20, verbose_name='rola')),
                ('is_staff', models.BooleanField(default=False, verbose_name='status personelu')),
                ('is_active', models.BooleanField(default=True, verbose_name='aktywny')),
                ('last_login_ip', models.GenericIPAddressField(blank=True, null=True, verbose_name='ostatnie logowanie IP')),
                ('failed_login_attempts', models.PositiveIntegerField(default=0, verbose_name='nieudane próby logowania')),
                ('account_locked_until', models.DateTimeField(blank=True, null=True, verbose_name='konto zablokowane do')),
                ('groups', models.ManyToManyField(blank=True, help_text='The groups this user belongs to. A user will get all permissions granted to each of their groups.', related_name='user_set', related_query_name='user', to='auth.group', verbose_name='groups')),
                ('user_permissions', models.ManyToManyField(blank=True, help_text='Specific permissions for this user.', related_name='user_set', related_query_name='user', to='auth.permission', verbose_name='user permissions')),
            ],
            options={
                'verbose_name': 'użytkownik',
                'verbose_name_plural': 'użytkownicy',
                'db_table': 'users',
            },
        ),
        migrations.CreateModel(
            name='AuditLog',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('type', models.CharField(max_length=50, verbose_name='typ')),
                ('level', models.CharField(choices=[('info', 'Info'), ('warning', 'Ostrzeżenie'), ('error', 'Błąd'), ('critical', 'Krytyczny')], default='info', max_length=20, verbose_name='poziom')),
                ('timestamp', models.DateTimeField(db_index=True, default=django.utils.timezone.now, verbose_name='czas')),
                ('message', models.TextField(blank=True, verbose_name='komunikat')),
                ('adres_ip', models.GenericIPAddressField(blank=True, null=True, verbose_name='adres IP')),
                ('user_agent', models.CharField(blank=True, max_length=500, verbose_name='user agent')),
                ('entity_type', models.CharField(blank=True, max_length=50, verbose_name='typ encji')),
                ('entity_id', models.CharField(blank=True, max_length=100, verbose_name='ID encji')),
                ('metadata', models.JSONField(blank=True, default=dict, verbose_name='metadane')),
                ('user', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='audit_logs', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'log zdarzeń',
                'verbose_name_plural': 'logi zdarzeń',
                'db_table': 'logi',
            },
        ),
        migrations.CreateModel(
            name='Client',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('deleted_at', models.DateTimeField(blank=True, null=True, verbose_name='usunięte (GDPR)')),
                ('first_name', models.CharField(max_length=100, verbose_name='imię')),
                ('last_name', models.CharField(max_length=100, verbose_name='nazwisko')),
                ('email', models.EmailField(db_index=True, max_length=254, verbose_name='email')),
                ('phone', models.CharField(blank=True, max_length=20, validators=[django.core.validators.RegexValidator('^\\+?[1-9]\\d{8,14}$', 'Numer telefonu musi być w formacie międzynarodowym (+XXXXXXXXX, 9-15 cyfr).')], verbose_name='telefon')),
                ('number', models.CharField(db_index=True, max_length=20, unique=True, verbose_name='numer klienta')),
                ('total_spent_amount', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=12, verbose_name='łączna kwota wydana')),
                ('marketing_consent', models.BooleanField(default=False, verbose_name='zgoda marketingowa')),
                ('preferred_contact', models.CharField(choices=[('email', 'Email'), ('telefon', 'Telefon'), ('sms', 'SMS')], default='email', max_length=20, verbose_name='preferowany kontakt')),
                ('visits_count', models.PositiveIntegerField(default=0, verbose_name='liczba wizyt')),
                ('internal_notes', models.TextField(blank=True, verbose_name='notatki wewnętrzne')),
                ('user', models.OneToOneField(blank=True, limit_choices_to={'role': 'client'}, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='client', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'klient',
                'verbose_name_plural': 'klienci',
                'db_table': 'klienci',
                'ordering': ['last_name', 'first_name'],
                'base_manager_name': 'objects',
                'default_manager_name': 'active',
            },
            managers=[
                ('objects', django.db.models.manager.Manager()),
                ('active', django.db.models.manager.Manager()),
            ],
        ),
        migrations.CreateModel(
            name='Employee',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('number', models.CharField(db_index=True, max_length=20, unique=True, verbose_name='numer pracownika')),
                ('first_name', models.CharField(max_length=100, verbose_name='imię')),
                ('last_name', models.CharField(max_length=100, verbose_name='nazwisko')),
                ('phone', models.CharField(blank=True, max_length=20, validators=[django.core.validators.RegexValidator('^\\+?[1-9]\\d{8,14}$', 'Numer telefonu musi być w formacie międzynarodowym (+XXXXXXXXX, 9-15 cyfr).')], verbose_name='telefon')),
                ('hired_at', models.DateField(blank=True, null=True, verbose_name='data zatrudnienia')),
                ('average_rating', models.DecimalField(blank=True, decimal_places=2, max_digits=3, null=True, verbose_name='średnia ocena')),
                ('is_active', models.BooleanField(db_index=True, default=True, verbose_name='aktywny')),
                ('appointments_count', models.PositiveIntegerField(default=0, verbose_name='liczba wizyt')),
                ('user', models.OneToOneField(limit_choices_to={'role': 'employee'}, on_delete=django.db.models.deletion.CASCADE, related_name='employee', to=settings.AUTH_USER_MODEL)),
                ('skills', models.ManyToManyField(blank=True, related_name='employees', to='beauty_salon.service')),
            ],
            options={
                'verbose_name': 'pracownik',
                'verbose_name_plural': 'pracownicy',
                'db_table': 'pracownicy',
                'ordering': ['last_name', 'first_name'],
            },
        ),
        migrations.CreateModel(
            name='Appointment',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('status', models.CharField(choices=[('pending', 'Oczekująca'), ('confirmed', 'Potwierdzona'), ('in_progress', 'W trakcie'), ('completed', 'Zrealizowana'), ('cancelled', 'Odwołana'), ('no_show', 'Nieobecność (No-show)')], db_index=True, default='pending', max_length=20, verbose_name='status')),
                ('start', models.DateTimeField(db_index=True, verbose_name='termin start')),
                ('end', models.DateTimeField(verbose_name='termin koniec')),
                ('booking_channel', models.CharField(default='web', max_length=20, verbose_name='kanał rezerwacji')),
                ('client_notes', models.TextField(blank=True, verbose_name='notatki klienta')),
                ('internal_notes', models.TextField(blank=True, verbose_name='notatki wewnętrzne')),
                ('cancelled_at', models.DateTimeField(blank=True, null=True, verbose_name='data anulowania')),
                ('cancellation_reason', models.TextField(blank=True, verbose_name='powód anulowania')),
                ('reminder_sent', models.BooleanField(default=False, verbose_name='przypomnienie wysłane')),
                ('reminder_sent_at', models.DateTimeField(blank=True, null=True)),
                ('cancelled_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='cancelled_appointments', to=settings.AUTH_USER_MODEL)),
                ('client', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='appointments', to='beauty_salon.client')),
                ('employee', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='appointments', to='beauty_salon.employee')),
                ('service', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='appointments', to='beauty_salon.service')),
            ],
            options={
                'verbose_name': 'wizyta',
                'verbose_name_plural': 'wizyty',
                'db_table': 'wizyty',
                'ordering': ['-start'],
            },
        ),
        migrations.CreateModel(
            name='Invoice',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('number', models.CharField(db_index=True, max_length=50, unique=True, verbose_name='numer faktury')),
                ('issue_date', models.DateField(db_index=True, verbose_name='data wystawienia')),
                ('net_amount', models.DecimalField(decimal_places=2, max_digits=10, verbose_name='kwota netto')),
                ('vat_rate', models.DecimalField(decimal_places=2, default=Decimal('23.00'), max_digits=5, verbose_name='stawka VAT %')),
                ('vat_amount', models.DecimalField(decimal_places=2, max_digits=10, verbose_name='kwota VAT')),
                ('gross_amount', models.DecimalField(decimal_places=2, max_digits=10, verbose_name='kwota brutto')),
                ('is_paid', models.BooleanField(db_index=True, default=False, verbose_name='zapłacona')),
                ('sale_date', models.DateField(verbose_name='data sprzedaży')),
                ('due_date', models.DateField(blank=True, null=True, verbose_name='termin płatności')),
                ('paid_date', models.DateField(blank=True, null=True, verbose_name='data opłacenia')),
                ('pdf_file', models.CharField(blank=True, max_length=500, verbose_name='plik PDF')),
                ('appointment', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='invoices', to='beauty_salon.appointment')),
                ('client', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='invoices', to='beauty_salon.client')),
            ],
            options={
                'verbose_name': 'faktura',
                'verbose_name_plural': 'faktury',
                'db_table': 'faktury',
            },
        ),
        migrations.CreateModel(
            name='MediaAsset',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('file_url', models.CharField(max_length=500, verbose_name='ścieżka URL')),
                ('type', models.CharField(default='portfolio', max_length=20, verbose_name='typ')),
                ('file_name', models.CharField(blank=True, max_length=255, verbose_name='nazwa pliku')),
                ('size_bytes', models.PositiveIntegerField(blank=True, null=True, verbose_name='rozmiar (B)')),
                ('is_active', models.BooleanField(db_index=True, default=True, verbose_name='aktywny')),
                ('description', models.TextField(blank=True, verbose_name='opis')),
                ('mime_type', models.CharField(blank=True, max_length=100, verbose_name='MIME type')),
                ('employee', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='media_assets', to='beauty_salon.employee')),
            ],
            options={
                'verbose_name': 'materiał',
                'verbose_name_plural': 'materiały',
                'db_table': 'materialy',
            },
        ),
        migrations.CreateModel(
            name='Note',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('content', models.TextField(verbose_name='treść')),
                ('visible_for_client', models.BooleanField(default=False, verbose_name='widoczna dla klienta')),
                ('appointment', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='notes', to='beauty_salon.appointment')),
                ('author', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='notes', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'notatka',
                'verbose_name_plural': 'notatki',
                'db_table': 'notatki',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='Notification',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('type', models.CharField(default='confirmation', max_length=20, verbose_name='typ')),
                ('channel', models.CharField(default='email', max_length=20, verbose_name='kanał')),
                ('status', models.CharField(default='pending', max_length=20, verbose_name='status')),
                ('scheduled_at', models.DateTimeField(default=django.utils.timezone.now, verbose_name='termin wysyłki')),
                ('subject', models.CharField(blank=True, max_length=200, verbose_name='temat')),
                ('content', models.TextField(verbose_name='treść')),
                ('sent_at', models.DateTimeField(blank=True, null=True, verbose_name='wysłane')),
                ('error_message', models.TextField(blank=True, verbose_name='komunikat błędu')),
                ('attempts_count', models.PositiveIntegerField(default=0, verbose_name='liczba prób')),
                ('appointment', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='notifications', to='beauty_salon.appointment')),
                ('client', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='notifications', to='beauty_salon.client')),
            ],
            options={
                'verbose_name': 'powiadomienie',
                'verbose_name_plural': 'powiadomienia',
                'db_table': 'powiadomienia',
            },
        ),
        migrations.CreateModel(
            name='Payment',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('amount', models.DecimalField(decimal_places=2, max_digits=10, verbose_name='kwota')),
                ('status', models.CharField(choices=[('paid', 'Zapłacona'), ('deposit', 'Zaliczka'), ('pending', 'Oczekująca')], db_index=True, default='pending', max_length=20, verbose_name='status')),
                ('paid_at', models.DateTimeField(blank=True, db_index=True, null=True, verbose_name='data płatności')),
                ('method', models.CharField(default='cash', max_length=20, verbose_name='metoda')),
                ('type', models.CharField(default='full', max_length=20, verbose_name='typ')),
                ('reference', models.CharField(blank=True, max_length=200, verbose_name='referencja')),
                ('appointment', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='payments', to='beauty_salon.appointment')),
            ],
            options={
                'verbose_name': 'płatność',
                'verbose_name_plural': 'płatności',
                'db_table': 'platnosci',
            },
        ),
        migrations.CreateModel(
            name='ReportPDF',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('type', models.CharField(max_length=30, verbose_name='typ')),
                ('title', models.CharField(max_length=200, verbose_name='tytuł')),
                ('file_path', models.CharField(max_length=500, verbose_name='ścieżka pliku')),
                ('data_od', models.DateField(blank=True, null=True, verbose_name='data od')),
                ('data_do', models.DateField(blank=True, null=True, verbose_name='data do')),
                ('file_size', models.PositiveIntegerField(default=0, verbose_name='rozmiar pliku (B)')),
                ('parameters', models.JSONField(blank=True, default=dict, verbose_name='parametry')),
                ('generated_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='reports', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'raport PDF',
                'verbose_name_plural': 'raporty PDF',
                'db_table': 'raporty',
            },
        ),
        migrations.CreateModel(
            name='Schedule',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('availability_periods', models.JSONField(default=list, verbose_name='okresy dostępności')),
                ('breaks', models.JSONField(default=list, verbose_name='przerwy')),
                ('status', models.CharField(choices=[('active', 'Aktywny'), ('pending', 'Oczekujący na zatwierdzenie')], default='active', max_length=20, verbose_name='status')),
                ('employee', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='schedules', to='beauty_salon.employee')),
            ],
            options={
                'verbose_name': 'grafik',
                'verbose_name_plural': 'grafiki',
                'db_table': 'grafiki',
            },
        ),
        migrations.CreateModel(
            name='SystemSettings',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('slot_minutes', models.PositiveIntegerField(default=30, verbose_name='slot minuty')),
                ('buffer_minutes', models.PositiveIntegerField(default=0, verbose_name='bufor minuty')),
                ('deposit_policy', models.JSONField(default=dict, verbose_name='polityka zaliczek')),
                ('opening_hours', models.JSONField(default=dict, verbose_name='godziny otwarcia')),
                ('salon_name', models.CharField(default='Beauty Salon', max_length=200, verbose_name='nazwa salonu')),
                ('address', models.CharField(blank=True, max_length=300, verbose_name='adres')),
                ('phone', models.CharField(blank=True, max_length=20, verbose_name='telefon')),
                ('contact_email', models.EmailField(blank=True, max_length=254, verbose_name='email kontaktowy')),
                ('default_vat_rate', models.DecimalField(decimal_places=2, default=Decimal('23.00'), max_digits=5, verbose_name='stawka VAT domyślna %')),
                ('maintenance_mode', models.BooleanField(default=False, verbose_name='tryb konserwacji')),
                ('maintenance_message', models.TextField(blank=True, verbose_name='komunikat konserwacji')),
                ('last_modified_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='modyfikacje_ustawien', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'ustawienia systemowe',
                'verbose_name_plural': 'ustawienia systemowe',
                'db_table': 'ustawienia_systemowe',
            },
        ),
        migrations.CreateModel(
            name='TimeOff',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('date_from', models.DateField(verbose_name='data od')),
                ('date_to', models.DateField(verbose_name='data do')),
                ('status', models.CharField(choices=[('pending', 'Oczekujący'), ('approved', 'Zatwierdzony'), ('rejected', 'Odrzucony')], default='pending', max_length=20, verbose_name='status')),
                ('reason', models.TextField(blank=True, verbose_name='powód')),
                ('type', models.CharField(choices=[('vacation', 'Urlop'), ('sick', 'Choroba'), ('personal', 'Osobiste/Inne')], default='vacation', max_length=20, verbose_name='typ')),
                ('approved_at', models.DateTimeField(blank=True, null=True, verbose_name='data zatwierdzenia')),
                ('approved_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='approved_time_offs', to=settings.AUTH_USER_MODEL)),
                ('employee', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='time_offs', to='beauty_salon.employee')),
            ],
            options={
                'verbose_name': 'urlop/niedostępność',
                'verbose_name_plural': 'urlopy/niedostępności',
                'db_table': 'urlopy',
            },
        ),
        migrations.AddIndex(
            model_name='user',
            index=models.Index(fields=['email', 'is_active'], name='users_email_a7cfd1_idx'),
        ),
        migrations.AddIndex(
            model_name='user',
            index=models.Index(fields=['role'], name='users_role_0ace22_idx'),
        ),
        migrations.AddIndex(
            model_name='schedule',
            index=models.Index(fields=['employee', 'status'], name='grafiki_employe_5cdb27_idx'),
        ),
        migrations.AddConstraint(
            model_name='timeoff',
            constraint=models.CheckConstraint(condition=models.Q(('date_to__gte', models.F('date_from'))), name='timeoff_valid_dates'),
        ),
    ]
